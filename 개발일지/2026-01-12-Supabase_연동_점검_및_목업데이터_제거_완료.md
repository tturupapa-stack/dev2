# Supabase ì—°ë™ ì ê²€ ë° ëª©ì—… ë°ì´í„° ì œê±° ì™„ë£Œ ë³´ê³ ì„œ

**ì‘ì„±ì¼**: 2026-01-12  
**ìƒíƒœ**: âœ… ì™„ë£Œ

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ëª©ì—… ë°ì´í„° ì œê±°

**ë³€ê²½ ì‚¬í•­**:
- `app.py`ì—ì„œ `mock_data` fallback ì œê±°
- Supabase ì—°ê²° ì‹¤íŒ¨ ì‹œ ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€ í‘œì‹œ
- ëª©ì—… ë°ì´í„°ë¡œ ìë™ ì „í™˜í•˜ëŠ” ë¡œì§ ì œê±°

**ë³€ê²½ ì „**:
```python
try:
    from supabase_data import ...
    USE_SUPABASE = True
except:
    from mock_data import ...  # â† ì œê±°ë¨
    USE_SUPABASE = False
```

**ë³€ê²½ í›„**:
```python
# Supabase ì—°ê²° ê°•ì œ - ëª©ì—… ë°ì´í„° ì‚¬ìš© ì•ˆ í•¨
from supabase_data import get_all_analysis_results, get_all_products, search_products
USE_SUPABASE = True
```

### 2. Supabase ì—°ê²° í…ŒìŠ¤íŠ¸ ê²°ê³¼

**í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸**: `ui_integration/test_supabase_direct.py`

**í…ŒìŠ¤íŠ¸ ê²°ê³¼**:
- âœ… **products í…Œì´ë¸”**: 30ê°œ ì œí’ˆ ë°œê²¬
- âœ… **reviews í…Œì´ë¸”**: ë¦¬ë·° ë°ì´í„° ì •ìƒ ì¡°íšŒ
- âœ… **supabase_data ëª¨ë“ˆ**: ì •ìƒ ì‘ë™
- âœ… **REST API ì—°ê²°**: Status Code 200

**ì—°ê²° ì •ë³´**:
- URL: `https://bvowxbpqtfpkkxkzsumf.supabase.co`
- ANON KEY: `sb_publishable_afWmzo_2ypv3liBdpCkJjg_KjS7nqE2`
- ì„¤ì • ì†ŒìŠ¤: í™˜ê²½ ë³€ìˆ˜ (env_vars)

---

## ğŸ” GitHub ì €ì¥ì†Œ ì—°ë™ í™•ì¸

### ì €ì¥ì†Œ ì •ë³´
- **GitHub**: https://github.com/Siyeolryu/ica-github
- **Supabase**: https://supabase.com/dashboard/project/bvowxbpqtfpkkxkzsumf
- **Streamlit Cloud**: `dev2-2Hour/dev2-main/ui_integration/app.py` ê²½ë¡œ ì‚¬ìš©

### ì—°ë™ ìƒíƒœ

#### âœ… ë¡œì»¬ í™˜ê²½
- `.streamlit/secrets.toml` íŒŒì¼ ì„¤ì • ì™„ë£Œ
- Supabase ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ
- ëª©ì—… ë°ì´í„° ì œê±° ì™„ë£Œ

#### âš ï¸ Streamlit Cloud í™˜ê²½
- Streamlit Cloud Secrets ì„¤ì • í•„ìš”
- GitHub ì €ì¥ì†Œì— `secrets.toml`ì€ ì»¤ë°‹ë˜ì§€ ì•ŠìŒ (ë³´ì•ˆìƒ ì •ìƒ)
- Streamlit Cloud ëŒ€ì‹œë³´ë“œì—ì„œ Secrets ì„¤ì • í•„ìš”

---

## ğŸ“Š ë°ì´í„°ë² ì´ìŠ¤ ìƒíƒœ

### í…Œì´ë¸” í™•ì¸
- âœ… `products` í…Œì´ë¸”: 30ê°œ ì œí’ˆ ë°ì´í„° ì¡´ì¬
- âœ… `reviews` í…Œì´ë¸”: ë¦¬ë·° ë°ì´í„° ì¡´ì¬

### ìƒ˜í”Œ ë°ì´í„°
```
ì œí’ˆ 1: ID=27, Brand=Now Foods
ì œí’ˆ 2: ID=28, Brand=California Gold Nutrition
ì œí’ˆ 3: ID=29, Brand=Natrol
```

---

## ğŸ§ª í…ŒìŠ¤íŠ¸ ê²°ê³¼

### í…ŒìŠ¤íŠ¸ 1: ì§ì ‘ API í˜¸ì¶œ
```bash
cd ui_integration
python test_supabase_direct.py
```

**ê²°ê³¼**: âœ… ì„±ê³µ
- products í…Œì´ë¸” ì¡°íšŒ: 200 OK
- reviews í…Œì´ë¸” ì¡°íšŒ: 200 OK

### í…ŒìŠ¤íŠ¸ 2: supabase_data ëª¨ë“ˆ
```python
from supabase_data import get_all_products, get_reviews_by_product
products = get_all_products()  # 30ê°œ ì œí’ˆ
reviews = get_reviews_by_product('46')  # 20ê°œ ë¦¬ë·°
```

**ê²°ê³¼**: âœ… ì„±ê³µ

---

## ğŸ”§ Streamlit Cloud ë°°í¬ ì„¤ì •

### í•„ìš”í•œ ì‘ì—…

1. **Streamlit Cloud ëŒ€ì‹œë³´ë“œ ì ‘ì†**
   - https://share.streamlit.io/ ë˜ëŠ” Streamlit Cloud ëŒ€ì‹œë³´ë“œ

2. **ì•± ì„ íƒ â†’ Settings â†’ Secrets**

3. **ë‹¤ìŒ ë‚´ìš© ì¶”ê°€**:
```toml
SUPABASE_URL = "https://bvowxbpqtfpkkxkzsumf.supabase.co"
SUPABASE_ANON_KEY = "sb_publishable_afWmzo_2ypv3liBdpCkJjg_KjS7nqE2"
```

4. **ì•± ì¬ë°°í¬**

---

## ğŸ“ ë³€ê²½ëœ íŒŒì¼

### ìˆ˜ì •ëœ íŒŒì¼
1. `ui_integration/app.py`
   - ëª©ì—… ë°ì´í„° fallback ì œê±°
   - Supabase ì—°ê²° ì‹¤íŒ¨ ì‹œ ëª…í™•í•œ ì—ëŸ¬ ë©”ì‹œì§€

### ìƒì„±ëœ íŒŒì¼
1. `ui_integration/test_supabase_direct.py`
   - Supabase ì§ì ‘ ì—°ê²° í…ŒìŠ¤íŠ¸ ìŠ¤í¬ë¦½íŠ¸

### ìœ ì§€ëœ íŒŒì¼
- `ui_integration/mock_data.py` (ë°±ì—…ìš©ìœ¼ë¡œ ìœ ì§€, ì‚¬ìš© ì•ˆ í•¨)

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

- [x] ëª©ì—… ë°ì´í„° fallback ì œê±°
- [x] Supabase ì—°ê²° ê°•ì œ ì„¤ì •
- [x] Supabase ì—°ê²° í…ŒìŠ¤íŠ¸ ì„±ê³µ
- [x] products í…Œì´ë¸” ë°ì´í„° í™•ì¸
- [x] reviews í…Œì´ë¸” ë°ì´í„° í™•ì¸
- [x] supabase_data ëª¨ë“ˆ í…ŒìŠ¤íŠ¸ ì„±ê³µ
- [ ] Streamlit Cloud Secrets ì„¤ì • (ìˆ˜ë™ ì‘ì—… í•„ìš”)
- [ ] Streamlit ì•± ì‹¤í–‰ í…ŒìŠ¤íŠ¸

---

## ğŸš€ ë‹¤ìŒ ë‹¨ê³„

1. **ë¡œì»¬ í…ŒìŠ¤íŠ¸**:
   ```bash
   cd ui_integration
   streamlit run app.py
   ```
   - ì‚¬ì´ë“œë°”ì— "âœ… Supabase ì—°ë™ í™œì„±í™”" í‘œì‹œ í™•ì¸
   - ì‹¤ì œ ë°ì´í„°ê°€ í‘œì‹œë˜ëŠ”ì§€ í™•ì¸

2. **Streamlit Cloud ë°°í¬**:
   - Streamlit Cloud Secrets ì„¤ì •
   - ì•± ì¬ë°°í¬
   - ë°°í¬ í›„ ë°ì´í„° í™•ì¸

---

## ğŸ” ë³´ì•ˆ í™•ì¸

- âœ… `secrets.toml`ì€ `.gitignore`ì— í¬í•¨ë¨
- âœ… GitHubì— ì»¤ë°‹ë˜ì§€ ì•ŠìŒ
- âœ… Streamlit Cloudì—ì„œëŠ” Secrets ê¸°ëŠ¥ ì‚¬ìš© í•„ìš”

---

**ì‘ì„± ì‹œê°„**: 2026-01-12  
**ìƒíƒœ**: âœ… ëª©ì—… ë°ì´í„° ì œê±° ì™„ë£Œ, Supabase ì—°ë™ í™•ì¸ ì™„ë£Œ
