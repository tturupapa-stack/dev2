# 사용자 시나리오

## 📖 개요

건기식 리뷰 팩트체크 시스템의 사용자 시나리오 문서입니다. 이 프로토타입은 iHerb의 루테인 제품 5종(총 100개 리뷰)을 기반으로 동작합니다.

---

## 🎯 주요 사용자

| 사용자 유형 | 설명 | 주요 목적 |
|-------------|------|-----------|
| 일반 소비자 | 루테인 제품 구매를 고려하는 사람 | 제품별 리뷰 신뢰도 확인, 광고성 리뷰 식별 |
| 건강 관심자 | 눈 건강에 관심 있는 사용자 | 제품 성분 분석, 효능/부작용 정보 확인 |
| 비교 구매자 | 여러 제품 중 선택하려는 사용자 | 2-3개 제품 비교 분석 |

---

## 📋 시나리오 목록

### 시나리오 1: 단일 제품 분석

**상황:** 사용자가 특정 루테인 제품의 리뷰 신뢰도를 확인하고 싶어함

**사전 조건:**
- Supabase에 5개 루테인 제품과 100개 리뷰가 저장되어 있음
- 사용자가 웹 브라우저로 Streamlit 앱에 접속

**시나리오 흐름:**

```mermaid
sequenceDiagram
    participant User as 사용자
    participant App as Streamlit 앱
    participant DB as Supabase
    participant AI as Claude API

    User->>App: 앱 접속
    App->>User: 환영 화면 표시

    User->>App: 검색창에 "NOW Foods" 입력
    App->>DB: 제품 검색 쿼리
    DB->>App: 검색 결과 반환
    App->>User: 제품 목록 표시

    User->>App: "NOW Foods Lutein 20mg" 선택
    User->>App: [분석 시작] 버튼 클릭

    App->>DB: 선택된 제품 리뷰 조회
    DB->>App: 20개 리뷰 반환

    App->>App: 8단계 체크리스트 분석
    App->>App: 신뢰도 점수 계산

    App->>AI: 약사 페르소나 분석 요청
    AI->>App: 분석 결과 반환

    App->>User: 분석 결과 대시보드 표시
```

**결과:**
- 신뢰도 점수 게이지 차트 (예: 78/100점)
- 신뢰 등급 표시 (High/Medium/Low)
- 광고 의심 리뷰 비율 파이 차트
- 재구매율, 한달 사용자 비율 바 차트
- AI 약사의 성분 분석 및 인사이트

---

### 시나리오 2: 3종 제품 비교 분석

**상황:** 사용자가 루테인 제품 3개를 비교하여 최적의 제품을 선택하고 싶어함

**시나리오 흐름:**

1. **앱 접속 및 검색**
   - 사용자가 앱에 접속
   - 검색창에 "루테인" 또는 "Lutein" 입력
   - 5개 제품 목록이 표시됨

2. **제품 선택 (최대 3개)**
   - 사용자가 아래 3개 제품을 선택:
     - NOW Foods Lutein 20mg
     - Doctor's Best Lutein with Lutemax
     - Jarrow Formulas Lutein 20mg

3. **분석 실행**
   - [분석 시작] 버튼 클릭
   - 진행률 표시 (33% → 66% → 100%)

4. **비교 결과 확인**
   - 3개 제품 카드가 나란히 표시
   - 각 제품의 신뢰도 게이지 차트
   - 비교 테이블 (광고 의심률, 재구매율, 효능, 부작용 등)
   - 레이더 차트로 종합 비교
   - 각 제품별 AI 약사 인사이트 (확장 패널)

---

### 시나리오 3: 광고성 리뷰 식별

**상황:** 사용자가 특정 제품의 광고성 리뷰를 직접 확인하고 싶어함

**시나리오 흐름:**

1. 제품 선택 후 분석 실행
2. 결과 화면에서 "광고 의심 리뷰 하이라이트" 옵션 활성화
3. 리뷰 목록에서 광고 의심 리뷰가 하이라이트 표시
4. 각 리뷰 옆에 체크리스트 결과 요약 표시:
   - 과도한 긍정어 ✓
   - 반복 패턴 ✓
   - 짧은 리뷰 ✗
   - 구체성 부족 ✓

---

## 🖥️ 화면별 상세 시나리오

### 화면 1: 메인 화면 (환영 페이지)

**표시 내용:**
- 서비스 제목: "건기식 리뷰 팩트체크"
- 서비스 설명: "루테인 제품 리뷰 분석 시스템"
- 안내 메시지: "사이드바에서 제품을 검색하고 선택한 후 분석을 시작하세요."
- 등록된 제품 목록 (5개)

**사용자 액션:**
- 사이드바 검색창 사용
- 제품 선택

---

### 화면 2: 사이드바

**구성 요소:**

1. **검색창**
   - 플레이스홀더: "루테인 검색..."
   - 실시간 검색 결과 필터링

2. **제품 선택 (멀티셀렉트)**
   - 최대 3개 선택 가능
   - 선택된 제품 수 표시: "✅ 2개 제품 선택됨"

3. **옵션**
   - 광고 의심 리뷰 하이라이트 (체크박스)

4. **분석 시작 버튼**
   - 제품 미선택 시 비활성화
   - 클릭 시 분석 프로세스 시작

---

### 화면 3: 분석 진행 중

**표시 내용:**
- 진행률 바 (Progress Bar)
- 상태 메시지:
  - "📦 NOW Foods Lutein 분석 중... (1/3)"
  - "리뷰 조회 중..."
  - "광고 패턴 분석 중..."
  - "AI 약사 분석 중..."

---

### 화면 4: 단일 제품 결과

**레이아웃:**

```
┌─────────────────────────────────────────────┐
│ 📊 NOW Foods Lutein 20mg 분석 결과          │
├─────────────────────────────────────────────┤
│                                             │
│         ┌─────────────────┐                 │
│         │   게이지 차트    │                 │
│         │    78 / 100     │                 │
│         │   신뢰도: HIGH   │                 │
│         └─────────────────┘                 │
│         20개 리뷰 분석                       │
│                                             │
├─────────────────────────────────────────────┤
│ 📋 상세 분석                                 │
│ ┌─────────────────────────────────────────┐ │
│ │ 항목            │ 결과                  │ │
│ │ 광고 의심 비율   │ 15%                   │ │
│ │ 재구매율        │ 65%                   │ │
│ │ 한달사용 비율   │ 45%                   │ │
│ │ 평균 평점       │ 4.2 / 5              │ │
│ └─────────────────────────────────────────┘ │
│                                             │
├─────────────────────────────────────────────┤
│ 💊 AI 약사의 인사이트                        │
│                                             │
│ [요약]                                       │
│ 루테인 20mg은 눈 건강에 효과적인 성분입니다... │
│                                             │
│ [좋은 성분]                                  │
│ - 루테인 20mg: 황반변성 예방에 효과적         │
│ - 제아잔틴 1mg: 루테인과 시너지 효과          │
│                                             │
│ [주의사항]                                   │
│ - 임산부는 복용 전 전문가 상담 권장           │
│                                             │
└─────────────────────────────────────────────┘
```

---

### 화면 5: 상위 3종 비교 결과

**레이아웃:**

```
┌─────────────────────────────────────────────────────────────────┐
│ 🔍 건기식 리뷰 팩트체크 - 루테인 제품 상위 3종 비교 분석         │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  📦 제품 개요 (상위 3개)                                         │
│  ┌────────────────┐  ┌────────────────┐  ┌────────────────┐    │
│  │      🥇        │  │      🥈        │  │      🥉        │    │
│  │ NOW Foods      │  │ Doctor's Best  │  │ Jarrow         │    │
│  │ Lutein 20mg    │  │ Lutein Max     │  │ Formulas       │    │
│  │ $12.99         │  │ $18.99         │  │ $9.99          │    │
│  │                │  │                │  │                │    │
│  │ 게이지 78점    │  │ 게이지 82점    │  │ 게이지 71점    │    │
│  │ 신뢰도: HIGH   │  │ 신뢰도: HIGH   │  │ 신뢰도: MEDIUM │    │
│  │ 20개 리뷰      │  │ 20개 리뷰      │  │ 20개 리뷰      │    │
│  └────────────────┘  └────────────────┘  └────────────────┘    │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│ 📊 종합 비교표 (상위 3개)                                         │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ 항목          │ NOW Foods │ Doctor's Best│ Jarrow Formulas│ │
│ │ 신뢰도        │ 78점      │ 82점         │ 71점           │ │
│ │ 광고의심률    │ 15%       │ 10%          │ 25%            │ │
│ │ 재구매율      │ 65%       │ 75%          │ 55%            │ │
│ │ 한달사용      │ 45%       │ 60%          │ 35%            │ │
│ │ 평균평점      │ 4.2       │ 4.5          │ 3.9            │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│ 📈 시각화 분석 (상위 3개)                                         │
│                                                                 │
│  ┌──────────────────────────┐  ┌──────────────────────────┐    │
│  │ 🕸️ 다차원 비교 분석       │  │ 💰 가격 비교             │    │
│  │ (레이더 차트)            │  │                          │    │
│  │                          │  │ 가격대 비교 차트         │    │
│  │   신뢰도                 │  │ - NOW Foods: $12.99      │    │
│  │     ∧                    │  │ - Doctor's Best: $18.99  │    │
│  │    / \                   │  │ - Jarrow: $9.99          │    │
│  │   /   \                  │  │                          │    │
│  │ 가격   재구매             │  │                          │    │
│  │  \   /                   │  │                          │    │
│  │   \ /                    │  │                          │    │
│  │   효능                    │  │                          │    │
│  └──────────────────────────┘  └──────────────────────────┘    │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│ 📋 기타 제품                                                     │
│ ▸ Life Extension Lutein (신뢰도: 65점, MEDIUM)                 │
│ ▸ California Gold Nutrition (신뢰도: 58점, MEDIUM)             │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│ 💊 AI 약사 인사이트 (상위 3개)                                    │
│                                                                 │
│ ▸ 🥇 NOW Foods - 상세 분석                                      │
│   - 요약: 루테인 20mg은 눈 건강에 효과적...                      │
│   - 체크리스트 진행률: 87.5% (7/8)                              │
│   - 효능, 부작용, 권장사항, 주의사항 표시                         │
│                                                                 │
│ ▸ 🥈 Doctor's Best - 상세 분석                                  │
│   - 요약: Lutemax 성분으로 강화된 제품...                        │
│   - 체크리스트 진행률: 100% (8/8)                               │
│   - 효능, 부작용, 권장사항, 주의사항 표시                         │
│                                                                 │
│ ▸ 🥉 Jarrow Formulas - 상세 분석                                │
│   - 요약: 기본적인 루테인 제품...                                │
│   - 체크리스트 진행률: 75% (6/8)                                │
│   - 효능, 부작용, 권장사항, 주의사항 표시                         │
│                                                                 │
├─────────────────────────────────────────────────────────────────┤
│ 💬 리뷰 상세 보기 (상위 3개)                                      │
│                                                                 │
│ [제품 선택: NOW Foods ▼]                                        │
│ [☑ 광고 의심 리뷰 하이라이트] [평점 필터: 1,2,3,4,5]           │
│                                                                 │
│ 📊 평점 분포                                                    │
│ - 5점: 15개 | 4점: 3개 | 3점: 1개 | 2점: 1개 | 1점: 0개        │
│                                                                 │
│ 💬 리뷰 목록 (20개)                                              │
│ ┌─────────────────────────────────────────────────────────────┐ │
│ │ John Doe                      2025-12-15                   │ │
│ │ ⭐⭐⭐⭐⭐ [광고의심] [인증구매] [재구매] [1개월+]               │ │
│ │ 정말 좋은 제품입니다. 눈이 맑아지는 느낌이...                 │ │
│ └─────────────────────────────────────────────────────────────┘ │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 🔄 사용자 플로우 다이어그램

```mermaid
flowchart TD
    A[앱 접속] --> B[환영 화면]
    B --> C{검색어 입력?}

    C -->|Yes| D[제품 검색]
    C -->|No| E[전체 제품 목록]

    D --> F[검색 결과 표시]
    E --> F

    F --> G{제품 선택}
    G -->|0개 선택| H[분석 버튼 비활성화]
    G -->|1개 선택| I[단일 분석 모드]
    G -->|2-3개 선택| J[비교 분석 모드]

    H --> G

    I --> K[분석 시작]
    J --> K

    K --> L[리뷰 조회]
    L --> M[체크리스트 분석]
    M --> N[신뢰도 계산]
    N --> O[AI 분석]

    O --> P{분석 모드}
    P -->|단일| Q[단일 결과 화면]
    P -->|비교| R[비교 결과 화면]

    Q --> S[분석 완료]
    R --> S

    S --> T{다른 제품 분석?}
    T -->|Yes| G
    T -->|No| U[종료]
```

---

## ⚠️ 예외 상황 처리

### 1. 데이터베이스 연결 실패
- **상황:** Supabase 연결 오류
- **처리:** 에러 메시지 표시 "데이터베이스 연결에 실패했습니다. 잠시 후 다시 시도해주세요."

### 2. 제품에 리뷰가 없는 경우
- **상황:** 선택된 제품에 리뷰 데이터가 없음
- **처리:** 경고 메시지 표시 "{제품명}: 리뷰가 없습니다."

### 3. AI 분석 API 오류
- **상황:** Claude API 호출 실패
- **처리:** 체크리스트 분석 결과만 표시, AI 인사이트 섹션에 "AI 분석을 불러올 수 없습니다." 표시

### 4. 검색 결과 없음
- **상황:** 검색어와 일치하는 제품 없음
- **처리:** "검색 결과가 없습니다. 다른 검색어를 시도해보세요." 표시

---

## 📊 프로토타입 데이터 사양

| 항목 | 값 |
|------|-----|
| 제품 수 | 5개 (루테인) |
| 제품당 리뷰 수 | 20개 |
| 총 리뷰 수 | 100개 |
| 데이터 출처 | iHerb |
| 데이터베이스 | Supabase |

---

## 🧪 테스트 시나리오

### 기능 테스트

1. **검색 기능**
   - [x] 빈 검색어 → 전체 제품 표시 (신뢰도 기준 상위 3개 우선표시)
   - [x] "NOW" 검색 → NOW Foods 제품 표시
   - [x] 존재하지 않는 검색어 → 결과 없음 메시지 표시

2. **제품 표시 및 정렬**
   - [x] 상위 3개 제품 순위별 배지 표시 (🥇🥈🥉)
   - [x] 신뢰도 게이지 차트 렌더링
   - [x] 신뢰도 배지 (HIGH/MEDIUM/LOW) 표시
   - [x] 나머지 2개 제품 기타 제품 섹션에 간략 표시

3. **비교 기능**
   - [x] 종합 비교표 (상위 3개): 신뢰도, 광고의심률, 재구매율, 한달사용, 평균평점
   - [x] 레이더 차트: 다차원 분석
   - [x] 가격 비교 차트: 가격대별 비교

4. **분석 결과**
   - [x] 신뢰도 점수가 0-100 사이
   - [x] 레벨이 HIGH/MEDIUM/LOW 중 하나
   - [x] 차트가 정상 렌더링

5. **AI 약사 인사이트**
   - [x] 요약 정보 표시
   - [x] 효능 정보 표시
   - [x] 부작용 정보 표시
   - [x] 권장사항 표시
   - [x] 주의사항 표시
   - [x] 체크리스트 진행률 표시 (확장 패널)

6. **리뷰 상세 보기**
   - [x] 상위 3개 제품만 리뷰 상세 표시
   - [x] 평점 필터 기능
   - [x] 광고 의심 리뷰 하이라이트 기능
   - [x] 평점 분포 차트
   - [x] 리뷰 배지 (인증구매, 재구매, 1개월+, 광고의심) 표시

### 성능 테스트

- [x] 페이지 로드: 즉시 (mock 데이터 사용)
- [x] 검색 필터링: 실시간
- [x] 차트 렌더링: 부드러운 애니메이션

---

## 📚 관련 문서

- [프로젝트 전체 개요](project-overview.md)
- [팀원 A 가이드](team-member-a-data-collection-guide.md)
- [팀원 B 가이드](team-member-b-logic-design-ai-analysis-guide.md)
- [팀원 C 가이드](team-member-c-ui-integration-guide.md)
